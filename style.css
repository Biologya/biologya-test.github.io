/* ====== :root и переменные ====== */
:root {
  --bg: #eaf5ea;
  --card: #fff;
  --text: #1b3d1b;
  --primary: #4caf50;
  --wrong: #e53935;
  --accent: #2196f3;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Segoe UI', sans-serif;
  background: var(--bg);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 20px;
  box-sizing: border-box;
  transition: background 0.3s, color 0.3s;
}

body.dark {
  --bg: #121212;
  --card: #1e1e1e;
  --text: #e0e0e0;
  --primary: #4caf50;
  --wrong: #ef5350;
  --accent: #2196f3;
}

/* ====== Вертикальная панель вопросов ====== */
#questionPanelWrapper {
  position: fixed;
  top: 50px;
  left: 0;
  width: 60px;
  height: 90%;
  background: #f5f5f5;
  padding: 5px;
  border-right: 1px solid #ccc;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: 2px 0 5px rgba(0,0,0,0.1);
  z-index: 100;
  overflow: hidden;
  transition: width 0.3s ease, background 0.3s ease;
}

#questionPanelWrapper.collapsed { width: 20px; }

#togglePanelBtn {
  margin-bottom: 10px;
  cursor: pointer;
  padding: 3px 6px;
  font-size: 14px;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 4px;
  transition: transform 0.3s ease;
}

#questionPanel {
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow-y: auto;
  flex-grow: 1;
  text-align: center;
  width: 100%;
}

#questionPanel button,
#pageNav button {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid #ccc;
  background: #fff;
  color: #000;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.3s ease;
}

#questionPanel button.active,
#pageNav button.active {
  border-color: var(--accent);
  box-shadow: 0 0 6px rgba(33,150,243,0.7);
}

#questionPanel button.correct,
#pageNav button.correct { background: var(--primary); border-color: var(--primary); color: #fff; }
#questionPanel button.wrong,
#pageNav button.wrong { background: var(--wrong); border-color: var(--wrong); color: #fff; }

#questionPanel button:hover,
#pageNav button:hover { transform: scale(1.1); }

#pageNav {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 16px;
  align-items: center;
}

#resetWrapper {
  margin-top: 8px;
}

#resetBtn {
  width: 50px;
  padding: 5px 10px;
  background: #ff4d4d;
  color: #fff;
  border: 2px solid #ff0000;
  border-radius: 5px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}

#resetBtn:hover { background: #ff1a1a; }

/* ====== Основной контент ====== */
.app {
  margin-left: 70px;
  padding: 15px;
  max-width: 1000px;
  width: calc(100% - 120px);
  box-sizing: border-box;
}

.header { margin-bottom: 15px; }

.card {
  background: var(--card);
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.06);
  transition: all 0.3s ease;
}

.controls,
.footer {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

button {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: 14px;
  background: var(--primary);
  color: #fff;
  cursor: pointer;
  transition: all 0.3s ease;
}

button:hover { background: #81c784; }
button.secondary { background: #81c784; }

#loadFromCloudBtn {
    background: #2196F3 !important;
    color: white !important;
    border: none !important;
    padding: 8px 16px !important;
    border-radius: 4px !important;
    cursor: pointer !important;
    font-weight: bold !important;
    transition: background 0.3s !important;
    margin-left: 10px !important;
}

#loadFromCloudBtn:hover {
    background: #1976D2 !important;
}

#loadFromCloudBtn:disabled {
    background: #BBDEFB !important;
    cursor: not-allowed !important;
}

/* ====== Прогресс ====== */
.progress-bar {
  height: 8px;
  background: #cfe8cf;
  border-radius: 4px;
  overflow: hidden;
  margin-top: 12px;
}

#progressFill {
  height: 100%;
  background: var(--primary);
  transition: width 0.3s ease;
}

/* ====== Ответы ====== */
#answers {
  margin-top: 16px;
  display: grid;
  gap: 10px;
}

.answer {
  position: relative;
  padding: 12px 16px;
  border-radius: 12px;
  border: 2px solid #cfe8cf;
  cursor: pointer;
  display: flex;
  align-items: center;
  transition: all 0.3s ease;
}

.answer:hover { 
  background: #dff3df; 
  transform: scale(1.03);
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.answer.selected {
  background: #c8e6c9;
  transform: scale(1.05);
  box-shadow: 0 4px 10px rgba(33,150,243,0.3);
}

.answer.correct {
  border-color: var(--primary);
  background: #c8e6c9;
}

.answer.wrong {
  border-color: var(--wrong);
  background: #ffcdd2;
}

/* ====== Fade анимация ====== */
.fade {
  animation: fade 0.3s ease;
}

@keyframes fade {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ====== Админ и статусы ====== */
.admin-status {
  cursor: pointer;
  transition: all 0.3s ease;
}

.admin-status:hover { 
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.status-allowed { background: #4CAF50; color: #fff; }
.status-pending { background: #FF9800; color: #fff; }
.status-allowed:hover { background: #388E3C; }
.status-pending:hover { background: #F57C00; }

/* ====== AUTH / WAIT OVERLAY ====== */
#authOverlay, #waitOverlay {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, rgba(30,60,114,0.92), rgba(42,82,152,0.92));
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  pointer-events: auto;
}

.authCard {
  background: var(--card);
  padding: 26px;
  border-radius: 12px;
  width: 360px;
  max-width: calc(100% - 40px);
  text-align: center;
  box-shadow: 0 10px 40px rgba(0,0,0,0.35);
}

.authCard h1 { margin: 0 0 12px 0; font-size: 20px; color: var(--text); }
.authCard input {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  font-size: 15px;
  border-radius: 8px;
  border: 1px solid #ddd;
  box-sizing: border-box;
}
.authCard button {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 15px;
}

.authCard .muted { margin-top: 8px; color: #666; font-size: 14px; }
.small-ghost { margin-top: 10px; background: transparent; color: var(--accent); border: none; cursor: pointer; font-size: 14px; }

/* ====== ДЕКОРАТИВНЫЙ ФОН ====== */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -2;
  overflow: hidden;
  background: 
    /* Небо сверху */
    linear-gradient(180deg, 
      rgba(135, 206, 235, 0.3) 0%, 
      rgba(224, 247, 250, 0.2) 30%,
      transparent 60%),
    /* Трава снизу */
    linear-gradient(0deg, 
      rgba(76, 175, 80, 0.15) 0%, 
      rgba(139, 195, 74, 0.1) 15%,
      transparent 40%),
    /* Цветочные поляны */
    radial-gradient(ellipse at 20% 85%, rgba(255, 183, 77, 0.15) 0%, transparent 40%),
    radial-gradient(ellipse at 80% 90%, rgba(244, 67, 54, 0.1) 0%, transparent 35%),
    radial-gradient(ellipse at 50% 95%, rgba(156, 39, 176, 0.1) 0%, transparent 30%),
    /* Солнечные блики */
    radial-gradient(circle at 10% 20%, rgba(255, 235, 59, 0.2) 0%, transparent 25%),
    radial-gradient(circle at 90% 10%, rgba(255, 193, 7, 0.15) 0%, transparent 20%);
}

/* ====== ЛЕВАЯ И ПРАВАЯ СТОРОНЫ - ДЕРЕВЬЯ И КУСТЫ ====== */
.forest-left,
.forest-right {
  position: fixed;
  top: 0;
  width: 150px;
  height: 100%;
  pointer-events: none;
  z-index: -1;
  overflow: visible;
}

.forest-left { left: 0; }
.forest-right { right: 0; }

/* Дерево */
.tree {
  position: absolute;
  opacity: 0.25;
}

.tree-trunk {
  width: 20px;
  height: 80px;
  background: linear-gradient(90deg, #5d4037, #8d6e63, #5d4037);
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 0 0 5px 5px;
}

.tree-crown {
  width: 100px;
  height: 120px;
  background: radial-gradient(ellipse at 30% 30%, #66bb6a, #43a047, #2e7d32);
  border-radius: 50% 50% 45% 45%;
  position: absolute;
  bottom: 60px;
  left: 50%;
  transform: translateX(-50%);
  box-shadow: 
    -20px 20px 0 -10px #4caf50,
    20px 20px 0 -10px #388e3c,
    0 -30px 0 -20px #81c784;
  animation: tree-sway 8s infinite ease-in-out;
}

.tree-crown::before {
  content: '';
  position: absolute;
  top: 20%;
  left: 20%;
  width: 30%;
  height: 30%;
  background: rgba(255,255,255,0.1);
  border-radius: 50%;
}

/* Хвойное дерево */
.pine-tree {
  position: absolute;
  opacity: 0.3;
}

.pine-trunk {
  width: 15px;
  height: 60px;
  background: linear-gradient(90deg, #4e342e, #6d4c41);
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}

.pine-levels {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
}

.pine-level {
  width: 0;
  height: 0;
  border-left: 40px solid transparent;
  border-right: 40px solid transparent;
  border-bottom: 50px solid #2e7d32;
  position: relative;
  margin-bottom: -20px;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.pine-level:nth-child(2) {
  border-left-width: 50px;
  border-right-width: 50px;
  border-bottom-width: 60px;
  border-bottom-color: #388e3c;
  z-index: -1;
}

.pine-level:nth-child(3) {
  border-left-width: 60px;
  border-right-width: 60px;
  border-bottom-width: 70px;
  border-bottom-color: #43a047;
  z-index: -2;
}

/* Куст */
.bush {
  position: absolute;
  opacity: 0.35;
}

.bush-part {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #7cb342, #558b2f);
}

.bush-part:nth-child(1) { width: 50px; height: 50px; bottom: 0; left: 0; }
.bush-part:nth-child(2) { width: 60px; height: 60px; bottom: 10px; left: 25px; }
.bush-part:nth-child(3) { width: 45px; height: 45px; bottom: 0; left: 50px; }
.bush-part:nth-child(4) { width: 40px; height: 40px; bottom: 20px; left: 15px; }

/* Трава */
.grass {
  position: absolute;
  bottom: 0;
  opacity: 0.4;
}

.grass-blade {
  position: absolute;
  bottom: 0;
  width: 4px;
  background: linear-gradient(180deg, #8bc34a, #4caf50);
  border-radius: 50% 50% 0 0;
  transform-origin: bottom center;
  animation: grass-wave 3s infinite ease-in-out;
}

.grass-blade:nth-child(1) { height: 30px; left: 0; animation-delay: 0s; }
.grass-blade:nth-child(2) { height: 40px; left: 8px; animation-delay: 0.2s; }
.grass-blade:nth-child(3) { height: 25px; left: 15px; animation-delay: 0.4s; }
.grass-blade:nth-child(4) { height: 35px; left: 22px; animation-delay: 0.1s; }
.grass-blade:nth-child(5) { height: 28px; left: 30px; animation-delay: 0.3s; }

/* Цветы */
.flower {
  position: absolute;
  opacity: 0.5;
}

.flower-stem {
  width: 3px;
  height: 40px;
  background: #4caf50;
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}

.flower-head {
  width: 25px;
  height: 25px;
  position: absolute;
  bottom: 35px;
  left: 50%;
  transform: translateX(-50%);
  animation: flower-bob 4s infinite ease-in-out;
}

.flower-petals {
  width: 100%;
  height: 100%;
  position: relative;
}

.flower-petal {
  position: absolute;
  width: 12px;
  height: 12px;
  background: #ff7043;
  border-radius: 50% 0;
  top: 50%;
  left: 50%;
  transform-origin: 0 0;
}

.flower-petal:nth-child(1) { transform: rotate(0deg) translateX(8px); background: #ff7043; }
.flower-petal:nth-child(2) { transform: rotate(72deg) translateX(8px); background: #ff8a65; }
.flower-petal:nth-child(3) { transform: rotate(144deg) translateX(8px); background: #ff7043; }
.flower-petal:nth-child(4) { transform: rotate(216deg) translateX(8px); background: #ff8a65; }
.flower-petal:nth-child(5) { transform: rotate(288deg) translateX(8px); background: #ff7043; }

.flower-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 10px;
  height: 10px;
  background: #ffeb3b;
  border-radius: 50%;
}

/* ====== ПЛАВАЮЩИЕ ЭЛЕМЕНТЫ (более светлые) ====== */
.bio-decoration {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
  overflow: hidden;
}

.bio-element {
  position: absolute;
  opacity: 0.35; /* Увеличена видимость */
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

/* Клетка растения - более яркая */
.cell-plant {
  width: 90px;
  height: 90px;
  border: 4px solid #66bb6a;
  border-radius: 50%;
  position: relative;
  background: radial-gradient(circle at 30% 30%, rgba(102, 187, 106, 0.4), rgba(76, 175, 80, 0.2) 50%, transparent 70%);
  animation: float 12s infinite ease-in-out, drift-slow 35s infinite linear;
}

.cell-plant::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 45px;
  height: 45px;
  border: 3px solid #81c784;
  border-radius: 50%;
  opacity: 0.6;
}

.cell-plant::after {
  content: '';
  position: absolute;
  top: 20%;
  left: 20%;
  width: 20px;
  height: 20px;
  background: #a5d6a7;
  border-radius: 50%;
  opacity: 0.7;
  box-shadow: 0 0 10px rgba(165, 214, 167, 0.5);
}

/* Клетка животного - более яркая */
.cell-animal {
  width: 80px;
  height: 80px;
  border: 4px solid #64b5f6;
  border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
  position: relative;
  background: radial-gradient(circle at 40% 40%, rgba(100, 181, 246, 0.4), rgba(33, 150, 243, 0.2) 50%, transparent 70%);
  animation: morph 10s infinite ease-in-out, drift-reverse 30s infinite linear;
}

.cell-animal::before {
  content: '';
  position: absolute;
  top: 30%;
  left: 30%;
  width: 25px;
  height: 25px;
  background: #90caf9;
  border-radius: 50%;
  opacity: 0.6;
  box-shadow: 0 0 8px rgba(144, 202, 249, 0.5);
}

/* Спираль ДНК - светящаяся */
.dna-helix {
  width: 70px;
  height: 120px;
  position: relative;
  animation: float 15s infinite ease-in-out, rotate-slow 20s infinite linear;
  filter: drop-shadow(0 0 8px rgba(76, 175, 80, 0.3));
}

.dna-helix::before,
.dna-helix::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  border: 3px solid transparent;
  border-top-color: #66bb6a;
  border-radius: 50%;
  animation: rotate 8s linear infinite;
}

.dna-helix::before {
  border-right-color: #42a5f5;
  animation-direction: reverse;
}

/* Бактерия - светящаяся */
.bacteria {
  width: 120px;
  height: 50px;
  background: linear-gradient(90deg, rgba(102, 187, 106, 0.6), rgba(66, 165, 245, 0.6));
  border-radius: 25px;
  position: relative;
  opacity: 0.4;
  animation: wiggle 6s infinite ease-in-out, drift 25s infinite linear;
  box-shadow: 0 0 15px rgba(102, 187, 106, 0.3);
}

.bacteria::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 10%;
  transform: translateY(-50%);
  width: 10px;
  height: 10px;
  background: rgba(255,255,255,0.8);
  border-radius: 50%;
  box-shadow: 
    25px 0 0 rgba(255,255,255,0.8),
    50px 0 0 rgba(255,255,255,0.8),
    75px 0 0 rgba(255,255,255,0.8);
}

/* Лист - более зелёный */
.leaf {
  width: 70px;
  height: 120px;
  background: linear-gradient(135deg, #81c784 0%, #66bb6a 50%, #4caf50 100%);
  border-radius: 0% 100% 0% 100%;
  position: relative;
  opacity: 0.4;
  transform: rotate(-45deg);
  animation: sway 8s infinite ease-in-out, drift-slow 40s infinite linear;
  box-shadow: inset -5px -5px 15px rgba(0,0,0,0.1);
}

.leaf::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 3px;
  background: rgba(255,255,255,0.5);
  transform: translateY(-50%);
  box-shadow: 0 -15px 0 rgba(255,255,255,0.3), 0 15px 0 rgba(255,255,255,0.3);
}

/* Молекула - светящаяся */
.molecule {
  width: 60px;
  height: 60px;
  position: relative;
  animation: pulse-scale 5s infinite ease-in-out, drift-reverse 45s infinite linear;
  filter: drop-shadow(0 0 10px rgba(66, 165, 245, 0.4));
}

.molecule::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 25px;
  height: 25px;
  background: #64b5f6;
  border-radius: 50%;
  opacity: 0.7;
  box-shadow: 0 0 15px rgba(100, 181, 246, 0.6);
}

.molecule::after {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 15px;
  height: 15px;
  background: #81c784;
  border-radius: 50%;
  opacity: 0.8;
  box-shadow: 
    0 45px 0 #81c784,
    -22px 22px 0 #64b5f6,
    22px 22px 0 #64b5f6;
}

/* Амёба - более видимая */
.amoeba {
  width: 100px;
  height: 100px;
  background: radial-gradient(circle, rgba(129, 199, 132, 0.4), rgba(76, 175, 80, 0.2) 60%, transparent);
  border: 3px solid #81c784;
  border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
  animation: blob 8s infinite ease-in-out, drift 32s infinite linear;
  box-shadow: 0 0 20px rgba(129, 199, 132, 0.2);
}

/* Хлоропласт - яркий */
.chloroplast {
  width: 60px;
  height: 100px;
  background: linear-gradient(180deg, #66bb6a, #43a047, #2e7d32);
  border-radius: 50%;
  position: relative;
  opacity: 0.35;
  animation: float 12s infinite ease-in-out, drift-slow 38s infinite linear;
  box-shadow: inset -5px 0 15px rgba(0,0,0,0.2);
}

.chloroplast::before {
  content: '';
  position: absolute;
  top: 10%;
  left: 20%;
  right: 20%;
  height: 3px;
  background: rgba(255,255,255,0.6);
  box-shadow: 
    0 20px 0 rgba(255,255,255,0.5),
    0 40px 0 rgba(255,255,255,0.4),
    0 60px 0 rgba(255,255,255,0.3);
}

/* Митохондрия - яркая */
.mitochondria {
  width: 90px;
  height: 45px;
  background: linear-gradient(90deg, #ff8a65, #ff7043, #f4511e);
  border-radius: 22px;
  position: relative;
  opacity: 0.35;
  transform: rotate(-15deg);
  animation: wiggle 5s infinite ease-in-out, drift-reverse 28s infinite linear;
  box-shadow: 0 0 15px rgba(255, 112, 67, 0.3);
}

.mitochondria::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 20%;
  right: 20%;
  height: 3px;
  background: rgba(255,255,255,0.7);
  transform: translateY(-50%);
  box-shadow: 0 -10px 0 rgba(255,255,255,0.5), 0 10px 0 rgba(255,255,255,0.5);
}

/* Вирус - более заметный */
.virus {
  width: 50px;
  height: 50px;
  background: #ef5350;
  border-radius: 50%;
  position: relative;
  opacity: 0.3;
  animation: pulse-scale 4s infinite ease-in-out, drift 22s infinite linear;
  box-shadow: 0 0 15px rgba(239, 83, 80, 0.4);
}

.virus::before,
.virus::after {
  content: '';
  position: absolute;
  width: 35px;
  height: 4px;
  background: #ef5350;
  top: 50%;
  left: 50%;
  transform-origin: center;
  border-radius: 2px;
}

.virus::before {
  transform: translate(-50%, -50%) rotate(0deg);
  box-shadow: 0 -18px 0 #ef5350, 0 18px 0 #ef5350;
}

.virus::after {
  transform: translate(-50%, -50%) rotate(60deg);
  box-shadow: 0 -18px 0 #ef5350, 0 18px 0 #ef5350;
}

/* Споры - светящиеся */
.spore {
  width: 25px;
  height: 25px;
  background: radial-gradient(circle, #aed581 0%, #7cb342 70%, transparent);
  border-radius: 50%;
  position: relative;
  animation: pulse 3s infinite ease-in-out, drift-slow 50s infinite linear;
  box-shadow: 0 0 15px rgba(174, 213, 129, 0.5);
}

.spore::before {
  content: '';
  position: absolute;
  top: -8px;
  left: -8px;
  right: -8px;
  bottom: -8px;
  border: 2px dashed #aed581;
  border-radius: 50%;
  animation: pulse-ring 2.5s infinite;
}

/* ====== НОВЫЕ ЭЛЕМЕНТЫ ====== */

/* Бабочка */
.butterfly {
  width: 50px;
  height: 40px;
  position: relative;
  opacity: 0.5;
  animation: butterfly-fly 15s infinite ease-in-out, drift 20s infinite linear;
}

.butterfly-wing {
  position: absolute;
  width: 25px;
  height: 35px;
  background: linear-gradient(135deg, #ffb74d 0%, #ff9800 50%, #f57c00 100%);
  border-radius: 80% 20% 80% 20%;
  top: 0;
  box-shadow: inset -3px -3px 10px rgba(0,0,0,0.1);
}

.butterfly-wing.left {
  left: 0;
  transform-origin: right center;
  animation: wing-flap 0.5s infinite alternate;
}

.butterfly-wing.right {
  right: 0;
  transform-origin: left center;
  transform: scaleX(-1);
  animation: wing-flap 0.5s infinite alternate;
}

.butterfly-body {
  position: absolute;
  width: 8px;
  height: 30px;
  background: #5d4037;
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1;
}

.butterfly-antenna {
  position: absolute;
  width: 2px;
  height: 15px;
  background: #5d4037;
  top: -10px;
  border-radius: 50%;
}

.butterfly-antenna.left { left: 30%; transform: rotate(-20deg); }
.butterfly-antenna.right { right: 30%; transform: rotate(20deg); }

/* Птица */
.bird {
  width: 40px;
  height: 30px;
  position: relative;
  opacity: 0.4;
  animation: bird-fly 12s infinite ease-in-out, drift-reverse 18s infinite linear;
}

.bird-body {
  position: absolute;
  width: 25px;
  height: 15px;
  background: #90a4ae;
  border-radius: 50% 50% 40% 40%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.bird-wing {
  position: absolute;
  width: 20px;
  height: 12px;
  background: #b0bec5;
  border-radius: 50% 50% 0 50%;
  top: 20%;
  animation: bird-wing 0.8s infinite alternate;
}

.bird-wing.left { left: -5px; transform-origin: right bottom; }
.bird-wing.right { right: -5px; transform-origin: left bottom; transform: scaleX(-1); }

.bird-beak {
  position: absolute;
  width: 0;
  height: 0;
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
  border-left: 10px solid #ffb74d;
  right: -5px;
  top: 50%;
  transform: translateY(-50%);
}

/* Облако */
.cloud {
  width: 100px;
  height: 40px;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 50px;
  position: relative;
  opacity: 0.5;
  animation: cloud-drift 60s infinite linear;
  filter: blur(1px);
}

.cloud::before,
.cloud::after {
  content: '';
  position: absolute;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 50%;
}

.cloud::before {
  width: 50px;
  height: 50px;
  top: -25px;
  left: 15px;
}

.cloud::after {
  width: 40px;
  height: 40px;
  top: -15px;
  right: 15px;
}

/* Солнце */
.sun {
  width: 80px;
  height: 80px;
  background: radial-gradient(circle, #fff176 0%, #ffd54f 40%, #ffb74d 100%);
  border-radius: 50%;
  position: relative;
  opacity: 0.4;
  animation: sun-pulse 8s infinite ease-in-out, drift-slow 80s infinite linear;
  box-shadow: 
    0 0 40px rgba(255, 213, 79, 0.5),
    0 0 80px rgba(255, 183, 77, 0.3),
    0 0 120px rgba(255, 167, 38, 0.2);
}

.sun::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 120%;
  height: 120%;
  border: 3px dashed rgba(255, 213, 79, 0.3);
  border-radius: 50%;
  animation: rotate 30s infinite linear;
}

/* Паутинка */
.spider-web {
  width: 100px;
  height: 100px;
  position: relative;
  opacity: 0.15;
  animation: sway 20s infinite ease-in-out;
}

.spider-web::before {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background: 
    repeating-conic-gradient(from 0deg at 50% 100%, rgba(255,255,255,0.5) 0deg 10deg, transparent 10deg 20deg),
    repeating-radial-gradient(circle at 50% 100%, rgba(255,255,255,0.3) 0px 10px, transparent 10px 20px);
  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
}

/* Капля росы */
.dewdrop {
  width: 20px;
  height: 25px;
  background: linear-gradient(180deg, rgba(255,255,255,0.9) 0%, rgba(129, 199, 132, 0.6) 100%);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  position: relative;
  opacity: 0.5;
  animation: dew-shine 4s infinite ease-in-out, sway 10s infinite ease-in-out;
  box-shadow: inset -2px -2px 5px rgba(0,0,0,0.1), 0 2px 5px rgba(0,0,0,0.1);
}

.dewdrop::before {
  content: '';
  position: absolute;
  top: 20%;
  left: 30%;
  width: 6px;
  height: 6px;
  background: rgba(255,255,255,0.9);
  border-radius: 50%;
}

/* ====== АНИМАЦИИ ====== */
@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-20px) rotate(5deg); }
  50% { transform: translateY(0) rotate(0deg); }
  75% { transform: translateY(20px) rotate(-5deg); }
}

@keyframes morph {
  0%, 100% { border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; }
  25% { border-radius: 60% 40% 30% 70% / 60% 30% 40% 60%; }
  50% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; }
  75% { border-radius: 60% 40% 60% 40% / 40% 50% 60% 50%; }
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes rotate-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes blob {
  0%, 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
  25% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; }
  50% { border-radius: 50% 60% 30% 60% / 30% 60% 70% 40%; }
  75% { border-radius: 60% 40% 60% 40% / 40% 50% 60% 50%; }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.6; }
  50% { transform: scale(1.3); opacity: 0.9; }
}

@keyframes pulse-ring {
  0%, 100% { transform: scale(1); opacity: 0.6; }
  50% { transform: scale(1.6); opacity: 0; }
}

@keyframes pulse-scale {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

@keyframes drift {
  0% { transform: translateX(-150px) translateY(0); }
  100% { transform: translateX(calc(100vw + 150px)) translateY(30px); }
}

@keyframes drift-reverse {
  0% { transform: translateX(calc(100vw + 150px)) translateY(0); }
  100% { transform: translateX(-150px) translateY(-30px); }
}

@keyframes drift-slow {
  0% { transform: translateX(-100px) translateY(0); }
  50% { transform: translateX(calc(50vw)) translateY(-20px); }
  100% { transform: translateX(calc(100vw + 100px)) translateY(20px); }
}

@keyframes wiggle {
  0%, 100% { transform: rotate(-8deg); }
  50% { transform: rotate(8deg); }
}

@keyframes sway {
  0%, 100% { transform: rotate(-15deg); }
  50% { transform: rotate(15deg); }
}

@keyframes tree-sway {
  0%, 100% { transform: translateX(-50%) rotate(-3deg); }
  50% { transform: translateX(-50%) rotate(3deg); }
}

@keyframes grass-wave {
  0%, 100% { transform: rotate(-5deg); }
  50% { transform: rotate(5deg); }
}

@keyframes flower-bob {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(-5px); }
}

@keyframes butterfly-fly {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-30px) rotate(10deg); }
  50% { transform: translateY(-10px) rotate(0deg); }
  75% { transform: translateY(-40px) rotate(-10deg); }
}

@keyframes wing-flap {
  from { transform: rotateY(0deg); }
  to { transform: rotateY(60deg); }
}

@keyframes bird-fly {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-50px); }
}

@keyframes bird-wing {
  from { transform: rotate(-20deg); }
  to { transform: rotate(20deg); }
}

@keyframes cloud-drift {
  0% { transform: translateX(-200px); }
  100% { transform: translateX(calc(100vw + 200px)); }
}

@keyframes sun-pulse {
  0%, 100% { transform: scale(1); opacity: 0.4; }
  50% { transform: scale(1.1); opacity: 0.5; }
}

@keyframes dew-shine {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 0.8; }
}

/* ====== ПОЗИЦИОНИРОВАНИЕ ЛЕСА ====== */
.forest-left .tree:nth-child(1) { bottom: 10%; left: 20px; transform: scale(0.8); }
.forest-left .tree:nth-child(2) { bottom: 25%; left: 60px; transform: scale(1.2); }
.forest-left .pine-tree:nth-child(3) { bottom: 5%; left: 100px; transform: scale(0.9); }
.forest-left .bush:nth-child(4) { bottom: 0; left: 30px; }
.forest-left .grass:nth-child(5) { bottom: 0; left: 80px; }
.forest-left .flower:nth-child(6) { bottom: 0; left: 120px; }
.forest-left .tree:nth-child(7) { bottom: 40%; left: 10px; transform: scale(0.6); }

.forest-right .tree:nth-child(1) { bottom: 15%; right: 30px; transform: scale(1); }
.forest-right .pine-tree:nth-child(2) { bottom: 5%; right: 80px; transform: scale(1.1); }
.forest-right .bush:nth-child(3) { bottom: 0; right: 20px; }
.forest-right .grass:nth-child(4) { bottom: 0; right: 100px; }
.forest-right .flower:nth-child(5) { bottom: 0; right: 60px; }
.forest-right .tree:nth-child(6) { bottom: 35%; right: 10px; transform: scale(0.7); }
.forest-right .pine-tree:nth-child(7) { bottom: 50%; right: 50px; transform: scale(0.8); }

/* ====== ПОЗИЦИОНИРОВАНИЕ ПЛАВАЮЩИХ ЭЛЕМЕНТОВ ====== */
.bio-element:nth-child(1) { top: 8%; left: 20%; animation-delay: 0s, 0s; }
.bio-element:nth-child(2) { top: 5%; right: 30%; animation-delay: 1s, 5s; }
.bio-element:nth-child(3) { top: 60%; left: 10%; animation-delay: 2s, 10s; }
.bio-element:nth-child(4) { bottom: 30%; right: 15%; animation-delay: 0.5s, 3s; }
.bio-element:nth-child(5) { top: 40%; left: 25%; animation-delay: 3s, 8s; }
.bio-element:nth-child(6) { bottom: 20%; left: 30%; animation-delay: 1.5s, 12s; }
.bio-element:nth-child(7) { top: 12%; right: 15%; animation-delay: 2.5s, 6s; }
.bio-element:nth-child(8) { bottom: 40%; right: 25%; animation-delay: 0.8s, 15s; }
.bio-element:nth-child(9) { top: 70%; right: 10%; animation-delay: 4s, 9s; }
.bio-element:nth-child(10) { top: 3%; left: 40%; animation-delay: 3.5s, 4s; }
.bio-element:nth-child(11) { bottom: 50%; left: 5%; animation-delay: 5s, 11s; }
.bio-element:nth-child(12) { top: 55%; right: 5%; animation-delay: 0.3s, 7s; }
.bio-element:nth-child(13) { top: 25%; left: 15%; animation-delay: 2.2s, 14s; }
.bio-element:nth-child(14) { bottom: 10%; right: 35%; animation-delay: 1.8s, 2s; }
.bio-element:nth-child(15) { top: 45%; left: 45%; animation-delay: 4.5s, 16s; }
.bio-element:nth-child(16) { bottom: 25%; left: 40%; animation-delay: 0.6s, 13s; }
.bio-element:nth-child(17) { top: 75%; right: 30%; animation-delay: 3.2s, 18s; }
.bio-element:nth-child(18) { top: 20%; right: 40%; animation-delay: 1.2s, 20s; }
.bio-element:nth-child(19) { bottom: 60%; left: 35%; animation-delay: 5.5s, 1s; }
.bio-element:nth-child(20) { top: 50%; left: 8%; animation-delay: 2.8s, 17s; }
.bio-element:nth-child(21) { top: 85%; left: 50%; animation-delay: 0.9s, 19s; }
.bio-element:nth-child(22) { bottom: 15%; right: 50%; animation-delay: 4.2s, 22s; }
.bio-element:nth-child(23) { top: 35%; left: 60%; animation-delay: 1.6s, 24s; }
.bio-element:nth-child(24) { top: 65%; right: 45%; animation-delay: 3.8s, 21s; }
.bio-element:nth-child(25) { bottom: 35%; left: 55%; animation-delay: 0.4s, 25s; }
.bio-element:nth-child(26) { top: 15%; left: 70%; animation-delay: 5.2s, 6s; }
.bio-element:nth-child(27) { bottom: 45%; right: 8%; animation-delay: 2.1s, 11s; }
.bio-element:nth-child(28) { top: 80%; right: 20%; animation-delay: 3.6s, 14s; }
.bio-element:nth-child(29) { top: 30%; right: 55%; animation-delay: 1.4s, 8s; }
.bio-element:nth-child(30) { bottom: 5%; left: 45%; animation-delay: 4.8s, 3s; }

/* Разные размеры */
.bio-element:nth-child(3n) { transform: scale(0.7); }
.bio-element:nth-child(4n) { transform: scale(1.3); }
.bio-element:nth-child(5n) { transform: scale(0.9); }
.bio-element:nth-child(7n) { animation-duration: 10s, 30s; }

/* ====== ТЕМНАЯ ТЕМА ====== */
body.dark .bio-element {
  opacity: 0.25;
}

body.dark .tree-crown {
  background: radial-gradient(ellipse at 30% 30%, #2e7d32, #1b5e20, #0d3320);
}

body.dark .forest-left,
body.dark .forest-right {
  opacity: 0.6;
}

body.dark .cloud {
  opacity: 0.3;
}

body.dark .sun {
  opacity: 0.3;
  box-shadow: 
    0 0 30px rgba(255, 213, 79, 0.3),
    0 0 60px rgba(255, 183, 77, 0.2);
}

/* ====== МЕДИА-ЗАПРОСЫ ====== */
@media (max-width: 1024px) {
  .forest-left,
  .forest-right {
    width: 100px;
  }
  .forest-left .tree:nth-child(n+5),
  .forest-right .tree:nth-child(n+5) {
    display: none;
  }
}

@media (max-width: 768px) {
  .forest-left,
  .forest-right {
    width: 60px;
  }
  .forest-left .tree,
  .forest-right .tree,
  .forest-left .pine-tree,
  .forest-right .pine-tree {
    transform: scale(0.6) !important;
  }
  .bio-element {
    transform: scale(0.6);
    opacity: 0.3;
  }
  .bio-element:nth-child(n+20) {
    display: none;
  }
  .cloud {
    opacity: 0.3;
  }
}

@media (max-width: 480px) {
  .forest-left,
  .forest-right {
    width: 40px;
  }
  .bio-element:nth-child(n+15) {
    display: none;
  }
}

/* ====== Адаптивность ====== */
@media (max-width: 600px) {
  #questionPanelWrapper { width: 50px; top: 40px; height: calc(100vh - 50px); }
  #questionPanel button { width: 32px; height: 32px; font-size: 12px; }
  #pageNav button { width: 32px; height: 32px; font-size: 12px; }
  #resetBtn { width: 45px; font-size: 11px; }
  .app { margin-left: 60px; padding: 10px; }
  .controls button { padding: 6px 10px; font-size: 14px; }
  #questionText { font-size: 18px; }
  .answer { font-size: 14px; padding: 10px 12px; }
  .authCard { padding: 18px; width: 92%; }
}




